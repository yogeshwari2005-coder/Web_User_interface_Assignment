<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Travel Booking - Q3</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding:1.2rem; background:#f5f7fb; }
    .destination { border-radius:12px; overflow:hidden; box-shadow:0 8px 20px rgba(20,20,40,0.06); position:relative; }
    .destination .badge { position:absolute; top:10px; right:10px; }
    .hero { background: linear-gradient(90deg,#4f46e5 0%,#06b6d4 100%); color:#fff; padding:1rem; border-radius:8px; margin-bottom:1rem; }
    .card-img { height:160px; object-fit:cover; width:100%; display:block; }
    @media (max-width:576px) { .card-img { height:120px; } }
  </style>
</head>
<body>
  <div class="container">
    <div class="hero d-flex justify-content-between align-items-center">
      <div>
        <h4>Find your next destination</h4>
        <p class="mb-0">Search, view details and book tickets â€” responsive design</p>
      </div>
      <div class="text-end">
        <button class="btn btn-light btn-sm" id="viewAll">View All</button>
      </div>
    </div>

    <!-- Search & Form -->
    <div class="card p-3 mb-3">
      <form id="searchForm" class="row g-2 align-items-end">
        <div class="col-md-4">
          <label>Destination</label>
          <input list="destlist" class="form-control" id="searchInput" placeholder="e.g. Paris, Goa" autocomplete="on">
          <datalist id="destlist">
            <option value="Paris, France">
            <option value="Goa, India">
            <option value="Tokyo, Japan">
            <option value="New York, USA">
            <option value="Bali, Indonesia">
          </datalist>
        </div>
        <div class="col-md-3">
          <label>Travel Date</label>
          <input type="date" class="form-control" id="travelDate">
        </div>
        <div class="col-md-3">
          <label>Budget (USD)</label>
          <input type="range" class="form-range" id="budgetRange" min="100" max="10000" value="1500">
          <small id="budgetVal">1500</small>
        </div>
        <div class="col-md-2 text-end">
          <button class="btn btn-primary w-100" type="submit">Search</button>
        </div>
      </form>
    </div>

    <!-- Destination grid -->
    <div id="results" class="row g-3">
      <!-- Cards will be injected dynamically -->
    </div>
  </div>

  <!-- Booking modal (Bootstrap) -->
  <div class="modal fade" id="bookModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <form id="bookForm" class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Book Trip</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="bookDest">
          <div class="mb-2">
            <label class="form-label">Destination</label>
            <input id="bookDestLabel" class="form-control" readonly>
          </div>
          <div class="mb-2">
            <label class="form-label">Travel Date</label>
            <input type="date" id="bookDate" class="form-control" required>
          </div>
          <div class="mb-2">
            <label class="form-label">Passengers</label>
            <input type="number" id="bookPax" min="1" value="1" class="form-control" required>
          </div>
          <div id="bookError" class="text-danger small"></div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-success">Confirm Booking</button>
        </div>
      </form>
    </div>
  </div>

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    $(function(){
      // Mock data for destinations
      const destinations = [
        {id:1,name:"Paris, France",price:1200,desc:"City of lights",img:"https://picsum.photos/seed/paris/800/400"},
        {id:2,name:"Goa, India",price:450,desc:"Beaches and nightlife",img:"https://picsum.photos/seed/goa/800/400"},
        {id:3,name:"Tokyo, Japan",price:1800,desc:"Modern and traditional mix",img:"https://picsum.photos/seed/tokyo/800/400"},
        {id:4,name:"New York, USA",price:1500,desc:"The Big Apple",img:"https://picsum.photos/seed/ny/800/400"},
        {id:5,name:"Bali, Indonesia",price:900,desc:"Tropical retreat",img:"https://picsum.photos/seed/bali/800/400"}
      ];

      function render(list) {
        $('#results').empty();
        if (!list.length) { $('#results').html('<div class="col-12"><div class="alert alert-warning">No results found</div></div>'); return; }
        list.forEach(d => {
          const col = $(`
            <div class="col-md-4">
              <div class="destination card">
                <img class="card-img" src="${d.img}" alt="${d.name}">
                <span class="badge bg-warning">${d.price}$</span>
                <div class="p-3">
                  <h5>${d.name}</h5>
                  <p class="mb-2 small">${d.desc}</p>
                  <div class="d-flex justify-content-between">
                    <button class="btn btn-sm btn-outline-primary detailsBtn" data-id="${d.id}">Details</button>
                    <button class="btn btn-sm btn-primary bookBtn" data-id="${d.id}">Book</button>
                  </div>
                </div>
              </div>
            </div>`);
          $('#results').append(col);
        });
      }

      // initial render
      render(destinations);

      // Show details (dynamic load)
      $(document).on('click','.detailsBtn', function(){
        const id = $(this).data('id');
        const d = destinations.find(x => x.id==id);
        if(!d) return;
        alert(`${d.name}\n\nPrice: ${d.price}$\n\n${d.desc}`);
      });

      // Booking flow (open modal)
      const bookModal = new bootstrap.Modal($('#bookModal')[0]);
      $(document).on('click','.bookBtn', function(){
        const id = $(this).data('id'), d = destinations.find(x => x.id==id);
        $('#bookDest').val(id);
        $('#bookDestLabel').val(d.name);
        $('#bookDate').val('');
        $('#bookError').text('');
        bookModal.show();
      });

      // Book form validation + submit
      $('#bookForm').on('submit', function(e){
        e.preventDefault();
        const date = $('#bookDate').val(), pax = Number($('#bookPax').val());
        if(!date) { $('#bookError').text('Please choose a travel date'); return; }
        if (pax < 1) { $('#bookError').text('Passengers must be at least 1'); return; }
        bookModal.hide();
        alert('Booking confirmed! (demo)');
      });

      // Search + filter (jQuery)
      $('#searchForm').on('submit', function(e){
        e.preventDefault();
        const q = $('#searchInput').val().toLowerCase();
        const minBudget = Number($('#budgetRange').val());
        const date = $('#travelDate').val();
        const filtered = destinations.filter(d => {
          const matchQ = !q || d.name.toLowerCase().includes(q);
          const matchBudget = d.price <= (minBudget || Infinity);
          // date not used to filter in this demo (could check availability)
          return matchQ && matchBudget;
        });
        render(filtered);
        // Smooth scroll to results
        $('html,body').animate({scrollTop: $('#results').offset().top - 60}, 400);
      });

      // budget display
      $('#budgetRange').on('input change', function(){ $('#budgetVal').text($(this).val()); });

      // View all
      $('#viewAll').on('click', function(){ render(destinations); $('html,body').animate({scrollTop:0},300); });
    });
  </script>
</body>
</html>
