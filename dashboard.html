<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Employee Dashboard - Q2</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <!-- Bootstrap + simple styles -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { transition: background 0.25s, color 0.25s; padding:1.2rem; }
    .dark-theme { background:#121212; color:#e6e6e6; }
    .card { border-radius:10px; box-shadow:0 6px 14px rgba(0,0,0,0.06); }
    .panel-body { display:block; padding:0.8rem; }
    @media (max-width:768px){ .sidebar { order:2; } }
  </style>
</head>
<body>
  <div class="container-fluid">
    <header class="d-flex justify-content-between align-items-center mb-3">
      <h4>Company Dashboard</h4>
      <div>
        <button id="themeBtn" class="btn btn-outline-secondary btn-sm">Toggle Theme</button>
        <div class="btn-group ms-2">
          <button id="filterBtn" class="btn btn-outline-primary btn-sm dropdown-toggle" data-bs-toggle="dropdown">Filter</button>
          <ul class="dropdown-menu dropdown-menu-end p-2">
            <label class="form-check-label"><input type="checkbox" class="form-check-input me-1 filter" value="sales" checked> Sales</label><br>
            <label class="form-check-label"><input type="checkbox" class="form-check-input me-1 filter" value="support" checked> Support</label>
          </ul>
        </div>
      </div>
    </header>

    <div class="row g-3">
      <aside class="col-lg-3 sidebar">
        <div class="card p-3">
          <h6>Controls</h6>
          <div class="mb-2">
            <label>Min performance</label>
            <input id="minPerf" type="range" min="0" max="100" value="0" class="form-range">
            <small id="minVal">0%</small>
          </div>
          <button id="applyFilter" class="btn btn-primary btn-sm w-100">Apply Filter</button>
        </div>
      </aside>

      <main class="col-lg-9">
        <!-- Top metrics -->
        <div class="row g-3 mb-3">
          <div class="col-md-4">
            <div class="card p-3">
              <h6>Overall Productivity</h6>
              <div class="progress" style="height:18px;">
                <div id="prodBar" class="progress-bar" role="progressbar" style="width:72%">72%</div>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card p-3">
              <h6>Avg. Sales</h6>
              <div class="progress" style="height:18px;">
                <div id="salesBar" class="progress-bar bg-success" role="progressbar" style="width:58%">58%</div>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card p-3">
              <h6>Customer Support</h6>
              <div class="progress" style="height:18px;">
                <div id="supBar" class="progress-bar bg-info" role="progressbar" style="width:81%">81%</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Employee panels (expand/collapse with jQuery) -->
        <div id="employees" class="accordion">
          <!-- Panel template repeated -->
          <div class="accordion-item card mb-2">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed panel-header" type="button" data-bs-toggle="collapse" data-bs-target="#emp1">
                Alice — Sales
              </button>
            </h2>
            <div id="emp1" class="accordion-collapse collapse">
              <div class="accordion-body panel-body">
                <p>Performance: <strong>82%</strong></p>
                <div class="progress mb-2"><div class="progress-bar" style="width:82%">82%</div></div>
                <p>Notes: Consistent high performer in Q3.</p>
              </div>
            </div>
          </div>

          <div class="accordion-item card mb-2">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed panel-header" type="button" data-bs-toggle="collapse" data-bs-target="#emp2">
                Bob — Support
              </button>
            </h2>
            <div id="emp2" class="accordion-collapse collapse">
              <div class="accordion-body panel-body">
                <p>Performance: <strong>74%</strong></p>
                <div class="progress mb-2"><div class="progress-bar bg-info" style="width:74%">74%</div></div>
                <p>Notes: Excellent CSAT scores.</p>
              </div>
            </div>
          </div>

          <div class="accordion-item card mb-2">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed panel-header" type="button" data-bs-toggle="collapse" data-bs-target="#emp3">
                Carol — Sales
              </button>
            </h2>
            <div id="emp3" class="accordion-collapse collapse">
              <div class="accordion-body panel-body">
                <p>Performance: <strong>59%</strong></p>
                <div class="progress mb-2"><div class="progress-bar bg-success" style="width:59%">59%</div></div>
                <p>Notes: New hire, improving.</p>
              </div>
            </div>
          </div>

        </div>
      </main>
    </div>
  </div>

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    $(function(){
      // Theme toggle using DOM manipulation
      $('#themeBtn').on('click', function(){
        $('body').toggleClass('dark-theme');
        $(this).text($('body').hasClass('dark-theme') ? 'Light Mode' : 'Dark Mode');
      });

      // Show min value next to range
      $('#minPerf').on('input change', function(){
        $('#minVal').text($(this).val() + '%');
      });

      // Filter application: example hides employees with perf < min
      $('#applyFilter').on('click', function(){
        const min = Number($('#minPerf').val());
        $('#employees .accordion-item').each(function(){
          const perfText = $(this).find('.accordion-body strong').first().text() || '0';
          const perf = Number(perfText.replace('%','')) || 0;
          if (perf < min) $(this).fadeOut(); else $(this).fadeIn();
        });
      });

      // jQuery to animate expand/collapse (accordion uses bootstrap collapse)
      $('.panel-header').on('click', function(){
        // smooth scroll to opened panel (enhanced UX)
        const target = $($(this).data('bs-target'));
        setTimeout(()=> { // wait for collapse to complete toggle
          $('html,body').animate({scrollTop: target.offset().top - 80}, 300);
        }, 350);
      });

      // Example: dynamically update progress bars (simulate live update)
      setInterval(()=> {
        const newVal = Math.min(100, Math.max(20, Math.round(60 + 20*Math.sin(Date.now()/5000))));
        $('#prodBar').css('width', newVal + '%').text(newVal + '%');
      }, 4000);
    });
  </script>
</body>
</html>
